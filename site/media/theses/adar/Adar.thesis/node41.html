<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<!--Converted with LaTeX2HTML 96.1 (Feb 5, 1996) by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds -->
<HTML>
<HEAD>
<TITLE>The Promise Class</TITLE>
<META NAME="description" CONTENT="The Promise Class">
<META NAME="keywords" CONTENT="main">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<LINK REL=STYLESHEET HREF="main.css">
</HEAD>
<BODY LANG="EN">
 <A NAME="tex2html708" HREF="node42.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="next_motif.gif"></A> <A NAME="tex2html706" HREF="node40.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="up_motif.gif"></A> <A NAME="tex2html702" HREF="node40.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="previous_motif.gif"></A> <A NAME="tex2html710" HREF="node2.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="contents_motif.gif"></A>  <BR>
<B> Next:</B> <A NAME="tex2html709" HREF="node42.html">The BaleWeavable Interface and </A>
<B>Up:</B> <A NAME="tex2html707" HREF="node40.html">The NeedleWeavable Interface and </A>
<B> Previous:</B> <A NAME="tex2html703" HREF="node40.html">The NeedleWeavable Interface and </A>
<BR> <P>
<H3><A NAME="SECTION00750100000000000000">The <tt>Promise</tt> Class</A></H3>
<P>
The data of the <tt>Needle</tt> is also loaded into memory at the same
time as the <tt>Needle</tt> object, we do not want (for example) a
10Mb+ Postscript file loaded into memory.  Instead we create a
<tt>Promise</tt> class.  The <tt>Promise</tt> class holds one function,
<tt>fulfill()</tt> which returns a <tt>Reader</tt> (a Java stream
type).  It is the programmers job to implement the details of the
<tt>fulfill()</tt> class for their particular ``promise.''
<P>
As an example, consider the case of some user creating a
<tt>needle.Body</tt> that is supposed to hold a large Postscript file.
The file resides on disk somewhere.  Instead of setting the data field
within the <tt>needle.Body</tt> to the bits of the Postscript file, we
can set it to a special <tt>Promise</tt> class that holds the name of
the file location.  When <tt>getData()</tt> is invoked on the needle,
the <tt>Promise</tt> is returned, and when <tt>fulfill()</tt> is
invoked on the <tt>Promise</tt> the bits of the Postscript file are
dynamically loaded from disk.
<P>
Some <tt>Promise</tt>s are designed to do ``actual'' work.  For
example, a <tt>Promise</tt> held within a <tt>needle.Text</tt> may
actually extract the text from some other location on-the-fly.
Re-running the <tt>Promise</tt> is highly inefficient, so in Haystack
we provide the means for caching promises (see Section&nbsp;<A HREF="node69.html#HsCache"><IMG  ALIGN=BOTTOM ALT="gif" SRC="cross_ref_motif.gif"></A>).
<P>
<BR> <HR>
<P><ADDRESS>
Copyright 1998, Eytan Adar (eytan@alum.mit.edu)
</ADDRESS>
</BODY>
</HTML>
