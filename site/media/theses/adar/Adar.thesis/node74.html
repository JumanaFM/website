<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<!--Converted with LaTeX2HTML 96.1 (Feb 5, 1996) by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds -->
<HTML>
<HEAD>
<TITLE>The HsCommandAPI Service</TITLE>
<META NAME="description" CONTENT="The HsCommandAPI Service">
<META NAME="keywords" CONTENT="main">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<LINK REL=STYLESHEET HREF="main.css">
</HEAD>
<BODY LANG="EN">
 <A NAME="tex2html1115" HREF="node75.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="next_motif.gif"></A> <A NAME="tex2html1113" HREF="node72.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="up_motif.gif"></A> <A NAME="tex2html1107" HREF="node73.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="previous_motif.gif"></A> <A NAME="tex2html1117" HREF="node2.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="contents_motif.gif"></A>  <BR>
<B> Next:</B> <A NAME="tex2html1116" HREF="node75.html">The Command Class</A>
<B>Up:</B> <A NAME="tex2html1114" HREF="node72.html">The Interface Services</A>
<B> Previous:</B> <A NAME="tex2html1108" HREF="node73.html">The Middleman</A>
<BR> <P>
<H2><A NAME="SECTION001042000000000000000">The <tt>HsCommandAPI</tt> Service</A></H2>
<A NAME="HsCommandAPI">&#160;</A>
Because we would like to see Haystack extended and used by non-Java
systems the <tt>Middleman</tt> is not a perfect solution.  In addtion
to the <tt>Middleman</tt> we introduce the <tt>HsCommandAPI</tt>
service.  This service allows users to create a set of ``scripts'' (in
Java) that are invokable from external processes by means of a textual
command.  The command scripts (which are of type <tt>Command</tt>)
reside in the <tt>haystack.object.command</tt> package.
<P>
At any point after instantiation, it is possible to call the
<tt>register(...)</tt> method on the <tt>HsCommandAPI</tt> with a
<tt>Command</tt> object as an argument.  Once an object is registered
it is possible to invoke it through the <tt>HsCommandAPI</tt>.
Abstractly, what we now have is a service to allow for virtual method
invocations.  This invocation is done by means of the
<tt>invoke(...)</tt> method which accepts a string as an argument.  The
string is usually in the form (optionally with a new line at the end):
<P>
<center><tt>Function<sub><i>i</i></sub> Arg<sub>1</sub> Arg<sub>2</sub> Arg<sub>3</sub> ... Arg<sub><i>n</i></sub></tt>
</center>
<P>
Arguments are seperated by a white space character.  For multi-word
arguments, <tt>HsCommandAPI</tt> allows for the use of either quote or
double-quote characters to specify the beginning and end of a
multi-word string (i.e. <tt>'this is an example of a multi-word
argument'</tt>). Additionally, <tt>HsCommandAPI</tt> handles a number of
special characters:
<P>
<P><A NAME="1984">&#160;</A> 
<center>    
<table border><tr><td>
<tr><td>Character </td><td>Evaluates to: </tr><tr><td>
<tr><td>\t </td><td>tab 
<tr><td>\n </td><td>new line 
<tr><td>\r </td><td>return 
<tr><td>\f </td><td>form feed 
<tr><td>\x </td><td>x (i.e. any other character) </table>
</BR>
<STRONG>Table:</STRONG> The interpretation of special characters within the <tt>HsCommandAPI</tt><BR>
</CENTER></CENTER>
<P>
<P>
This leads the <tt>HsCommandAPI</tt> to invoke the <tt>Command</tt>
object corresponding to the name Function<sub><i>i</i></sub> with the
set of parsed arguments.  <tt>HsCommandAPI</tt> understands the
special ``<tt>help [functionName]</tt>'' command which returns the set
of functions it is capable of handling or the usage information for a
particular function (with the optional functionName argument).
<P>
The <tt>invoke()</tt> command will return the string response
generated by the invocation of the specific function.  If there was an
error in handling the function an exception
(<tt>BadCommandException</tt>) is thrown with details of the error.
<P>
<BR> <HR>
<UL> 
<LI> <A NAME="tex2html1118" HREF="node75.html#SECTION001042100000000000000">The <tt>Command</tt> Class</A>
<LI> <A NAME="tex2html1119" HREF="node76.html#SECTION001042200000000000000">Future Improvements</A>
</UL>
<HR><A NAME="tex2html1115" HREF="node75.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="next_motif.gif"></A> <A NAME="tex2html1113" HREF="node72.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="up_motif.gif"></A> <A NAME="tex2html1107" HREF="node73.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="previous_motif.gif"></A> <A NAME="tex2html1117" HREF="node2.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="contents_motif.gif"></A>  <BR>
<B> Next:</B> <A NAME="tex2html1116" HREF="node75.html">The Command Class</A>
<B>Up:</B> <A NAME="tex2html1114" HREF="node72.html">The Interface Services</A>
<B> Previous:</B> <A NAME="tex2html1108" HREF="node73.html">The Middleman</A>
<P><ADDRESS>
Copyright 1998, Eytan Adar (eytan@alum.mit.edu)
</ADDRESS>
</BODY>
</HTML>
