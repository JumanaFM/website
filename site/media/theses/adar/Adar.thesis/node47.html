<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<!--Converted with LaTeX2HTML 96.1 (Feb 5, 1996) by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds -->
<HTML>
<HEAD>
<TITLE>The HsLore Class</TITLE>
<META NAME="description" CONTENT="The HsLore Class">
<META NAME="keywords" CONTENT="main">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<LINK REL=STYLESHEET HREF="main.css">
</HEAD>
<BODY LANG="EN">
 <A NAME="tex2html772" HREF="node48.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="next_motif.gif"></A> <A NAME="tex2html770" HREF="node44.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="up_motif.gif"></A> <A NAME="tex2html766" HREF="node46.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="previous_motif.gif"></A> <A NAME="tex2html774" HREF="node2.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="contents_motif.gif"></A>  <BR>
<B> Next:</B> <A NAME="tex2html773" HREF="node48.html">Conclusions</A>
<B>Up:</B> <A NAME="tex2html771" HREF="node44.html">Haystack and Lore Integration</A>
<B> Previous:</B> <A NAME="tex2html767" HREF="node46.html">The HsOEMGenerator Class</A>
<BR> <P>
<H1><A NAME="SECTION00830000000000000000">The <tt>HsLore</tt> Class</A></H1>
<A NAME="HsLore">&#160;</A>
The <tt>HsLore</tt> class is a simple event listener class that
expresses interest in <tt>ObjectEvent</tt>s.  This implies that
<tt>any</tt> change in the HDM trigers an event.  Once <tt>HsLore</tt> is
notified of an event, it will invoke the <tt>generateLorel()</tt>
method of the <tt>Straw</tt> that caused the event.  The generated
string corresponds to the Lorel query that will update the database to
the new state of the object.
<P>
Upon initialization <tt>HsLore</tt> opens a stream connection to the
Lore process executing either locally on a remote
machine<A NAME="tex2html37" HREF="footnode.html#1167"><IMG  ALIGN=BOTTOM ALT="gif" SRC="foot_motif.gif"></A>.  Once the Lorel update code has been generated by
the <tt>Straw</tt>, <tt>HsLore</tt> will pass the query into Lore.
<P>
Unfortunately, at the time of this writing the Lorel update language
has not been completely defined.  The following is the Lorel syntax
for updating the Lore database for <tt>Straw</tt>s, <tt>Tie</tt>s, and
<tt>Needle</tt>s<A NAME="tex2html38" HREF="footnode.html#1173"><IMG  ALIGN=BOTTOM ALT="gif" SRC="foot_motif.gif"></A>.
<P>
Lore allows us to refer to the globally named pointer directed at the
current Straw by means of the <tt>Global!</tt><em>Identifier</em>
argument.  For example, if a <tt>Straw</tt> with the
<tt>HaystackID</tt> 253 is loaded into Lore, the Lore OEM object
corresponding to that <tt>Straw</tt> can be accessed by
<tt>Global!ID253</tt>.  The Lorel to update a generic <tt>Straw</tt>
with HaystackID <I>x</I> and type <I>y</I> is of the form:
<p>
<tt>Global!ID<i>x</i> := oem(HID:``<i>x</i>'', HTYPE:``<i>y</i>'', <br> 
  FPOINTERS:oem(ID<sub><i>f</i>1</sub>,ID<sub><i>f</i>2</sub>,...,ID<sub><i>f</i><i>n</i></sub>),<br>
  BPOINTERS:oem(ID<sub><i>b</i>1</sub>,ID<sub><i>b</i>2</sub>,...,ID<sub><i>b</i><i>n</i></sub>));</tt>

<p>
The values of ID<sub><i>f</i>1</sub> - ID<sub><i>f</i><i>n</i></sub> are simply the names of the
global Lore pointers to the the forward objects of the <tt>Straw</tt>.
For example, if the <tt>Straw</tt> has a forward pointer to some
object with the <tt>HaystackID</tt> 494, then one of the ID<sub><i>f</i><i>i</i></sub>
values would be replaced with the string <tt>ID494</tt>.

<p>
For a <tt>Tie</tt>, the form of the Lorel query is very similar:

<p>
<tt>Global!ID<i>x</i> := oem(HID:``<i>x</i>'', HTYPE:``<i>y</i>'',<br>  
  FPOINTERS:oem(ID<sub><i>f</i>1</sub>,ID<sub><i>f</i>2</sub>,...,ID<sub><i>f</i><i>n</i></sub>),<br>
  BPOINTERS:oem(ID<sub><i>b</i>1</sub>,ID<sub><i>b</i>2</sub>,...,ID<sub><i>b</i><i>n</i></sub>),<br>
  TIEFPOINTER:ID<sub><i>t</i><i>f</i><i>p</i></sub>, TIEBPOINTER:ID<sub><i>t</i><i>b</i><i>p</i></sub>);</tt>

<p>
Where ID<sub><i>t</i><i>f</i><i>p</i></sub> and ID<sub><i>t</i><i>b</i><i>p</i></sub> are the global OEM identifiers for the
forward and backward pointers of the <tt>Tie</tt> respectively.
Finally, an update for a <tt>Needle</tt> object is of the form:

<p>
<tt>Global!ID<i>x</i> := oem(HID:``<i>x</i>'', HTYPE:``<i>y</i>'',<br>  
  FPOINTERS:oem(ID<sub><i>f</i>1</sub>,ID<sub><i>f</i>2</sub>,...,ID<sub><i>f</i><i>n</i></sub>),<br>
  BPOINTERS:oem(ID<sub><i>b</i>1</sub>,ID<sub><i>b</i>2</sub>,...,ID<sub><i>b</i><i>n</i></sub>),DATA:''data'');</tt>

<p>
Currently, we do not provide a simple method for the deletion of
objects as Lore does not provide a mechanism to delete a global name.
However, it is possible to disconnect the <tt>Straw</tt> from the total OEM
graph.  If we desire, for example, to remove the <tt>Straw</tt> with ID 4565,
the following query would work: <tt>Haystack =- ID4656</tt>.
<P>
<HR><A NAME="tex2html772" HREF="node48.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="next_motif.gif"></A> <A NAME="tex2html770" HREF="node44.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="up_motif.gif"></A> <A NAME="tex2html766" HREF="node46.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="previous_motif.gif"></A> <A NAME="tex2html774" HREF="node2.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="contents_motif.gif"></A>  <BR>
<B> Next:</B> <A NAME="tex2html773" HREF="node48.html">Conclusions</A>
<B>Up:</B> <A NAME="tex2html771" HREF="node44.html">Haystack and Lore Integration</A>
<B> Previous:</B> <A NAME="tex2html767" HREF="node46.html">The HsOEMGenerator Class</A>
<P><ADDRESS>
Copyright 1998, Eytan Adar (eytan@alum.mit.edu)
</ADDRESS>
</BODY>
</HTML>
