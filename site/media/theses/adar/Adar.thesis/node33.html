<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<!--Converted with LaTeX2HTML 96.1 (Feb 5, 1996) by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds -->
<HTML>
<HEAD>
<TITLE>The StrawTies Class</TITLE>
<META NAME="description" CONTENT="The StrawTies Class">
<META NAME="keywords" CONTENT="main">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<LINK REL=STYLESHEET HREF="main.css">
</HEAD>
<BODY LANG="EN">
 <A NAME="tex2html625" HREF="node34.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="next_motif.gif"></A> <A NAME="tex2html623" HREF="node32.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="up_motif.gif"></A> <A NAME="tex2html619" HREF="node32.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="previous_motif.gif"></A> <A NAME="tex2html627" HREF="node2.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="contents_motif.gif"></A>  <BR>
<B> Next:</B> <A NAME="tex2html626" HREF="node34.html">Straw Constructors</A>
<B>Up:</B> <A NAME="tex2html624" HREF="node32.html">The Weavable Interface and </A>
<B> Previous:</B> <A NAME="tex2html620" HREF="node32.html">The Weavable Interface and </A>
<BR> <P>
<H3><A NAME="SECTION00730100000000000000">The <tt>StrawTies</tt> Class</A></H3>
<P>
The two <tt>StrawTies</tt> objects provide a one-to-many mapping
between keys (labels), and other Haystack objects.  This essentially
provides us with a method to maintain the list of ``edges'' that any
vertex is attached to.  <tt>StrawTies</tt> therefore represent the
function <I>f</I>, where <I>f</I>(<I>s</I>) = {<tt>TieWeavable</tt> objects}, where
<I>s</I> is a string label.
<P>
<tt>StrawTies</tt> are internally implemented as two
<tt>Hashtable</tt>s.  One table maps a key to set of pointers (in the
Java sense), and the other contains the mapping between a key and the
<tt>HaystackID</tt>s (see below) of the objects.  In order to save the
HDM structure persistently we serialize<A NAME="tex2html32" HREF="footnode.html#745"><IMG  ALIGN=BOTTOM ALT="gif" SRC="foot_motif.gif"></A> (see
  Section&nbsp;<A HREF="node67.html#HsPersistentObjectService"><IMG  ALIGN=BOTTOM ALT="gif" SRC="cross_ref_motif.gif"></A>) each <tt>Straw</tt> object
  to save on disk.  Because the Java serialization mechanism will save
  not only the object being serialized but any objects that the
  serialized object points at, it is necessary to break apart
  <tt>Straw</tt>s before saving them.  Maintaining the two hashtables
  is an optimization that allows us to break apart and reassemble
  <tt>Straw</tt>s easily.
<P>
We enforce the following invariant: let each vertex of the HDM graph
(the <tt>Straw</tt>) possess a function, <i>f</i><sub>1</sub> that accepts as input
some key, <i>k</i> and produce a set of connected edges, <i>A</i>, labeled <i>k</i>.
Let <i>f</i><sub>2</sub> map some key <i>j</i> to a set of identifiers, <i>B</i>.  Then
<font face=symbol>"</font
> keys <i>k</i>, <i>j</i>, where <i>k</i> = <i>j</i>, <font face=symbol>$</font
> <i>a</i> in <i>A</i> and <i>b</i>
in <i>B</i>, s.t. <i>a</i>.getID() = <i>b</i>.  Simply stated, the hashtable holding
<tt>HaystackID</tt>s as values can be used to produce the hashtable
holding <tt>Straw</tt>s as values.
<P>
<tt>StrawTie</tt>s provide a subset of the features of the Java
Hashtable.  The function <tt>getVal(label)</tt> returns the
<tt>Vector</tt> of values with the given label.  To place a new
element into the table, <tt>put(key,value)</tt> is used.  Alternatively,
<tt>remove(...)</tt> and <tt>removeKey(...)</tt> allow for
pointers (i.e. edges) to be removed.
<tt>getAllLinks()</tt>, <tt>getIDs()</tt>, <tt>isEmpty()</tt>, and
<tt>toString()</tt> perform obvious functions.
<P>
<HR><A NAME="tex2html625" HREF="node34.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="next_motif.gif"></A> <A NAME="tex2html623" HREF="node32.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="up_motif.gif"></A> <A NAME="tex2html619" HREF="node32.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="previous_motif.gif"></A> <A NAME="tex2html627" HREF="node2.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="contents_motif.gif"></A>  <BR>
<B> Next:</B> <A NAME="tex2html626" HREF="node34.html">Straw Constructors</A>
<B>Up:</B> <A NAME="tex2html624" HREF="node32.html">The Weavable Interface and </A>
<B> Previous:</B> <A NAME="tex2html620" HREF="node32.html">The Weavable Interface and </A>
<P><ADDRESS>
Copyright 1998, Eytan Adar (eytan@alum.mit.edu)
</ADDRESS>
</BODY>
</HTML>
